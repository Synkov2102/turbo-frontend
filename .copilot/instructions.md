# GitHub Copilot — проектные инструкции

Этот проект использует Next.js + Material UI + CSS Modules + Feature-Sliced Design.  
Copilot должен генерировать код, строго следуя описанным ниже правилам.

---

# 1. Общие принципы

- Код должен быть чистым, читаемым и минималистичным.
- Используется TypeScript во всех файлах.
- Предпочитаемые компоненты — функциональные.
- По умолчанию компоненты — **server components**, если нет необходимости в клиентском (`"use client"`).
- Все UI-сущности создаются в FSD слоях, **не внутри app/**.

---

# 2. Архитектура проекта (FSD)

Проект разделён на следующие слои:

```
src/
 ├─ app/               # Только маршруты, layout, error, loading
 ├─ shared/            # Общие утилиты, UI, API, config
 ├─ entities/          # Сущности: модели, API, UI компоненты
 ├─ features/          # Фичи: логин, фильтр, корзина и т.п.
 ├─ widgets/           # Большие композиционные блоки: Header, Sidebar
 └─ pages-old/         # Игнорировать, не использовать
```

## Правила FSD:

- **app/** — только маршруты и layout'ы. Никакой логики, UI компонентов и сервисов.
- **entities/** — хранит модель и UI сущностей (User, Car, Order…).
- **features/** — пользовательские действия (auth, search, add-to-fav…).
- **widgets/** — комплексные блоки из entities + features.
- **shared/** — фундамент: UI, config, helpers, hooks, libs, API.

## Каждый модуль в FSD имеет структуру:

```
/module/
 ├─ ui/       # Компоненты
 ├─ model/    # Zustand/store, actions, types, services
 ├─ api/      # Запросы (если есть)
 ├─ lib/      # Helpers
 └─ index.ts  # Экспорт публичного API модуля
```

---

# 3. Импорты

Использовать алиасы:

```
@/shared/*
@/entities/*
@/features/*
@/widgets/*
@/app/*
```

Не использовать относительные импорты типа `../../../component`.  
Генерировать только абсолютные импорты.

---

# 4. React компоненты

## 4.1 Базовые правила

- Каждый компонент — отдельный файл.
- Имя файла совпадает с компонентом (PascalCase).
- Серверный компонент по умолчанию.
- Для интерактивности — добавлять `"use client"` в начало файла.
- Не смешивать логику и разметку → использовать паттерн **UI + logic**.

## 4.2 Пример структуры компонента

```
Component/
 ├─ Component.tsx
 ├─ Component.module.css
 ├─ model/
 └─ lib/
```

## 4.3 Лучшие практики

- Не использовать `any`.
- Использовать React.FC только когда нужны children — иначе обычная function.
- Не использовать default export, только именованные.
- Не использовать inline-styles, кроме редких случаев.
- Пропсы должны быть строго типизированы.

---

# 5. Работа с Material UI

## 5.1 Общие правила

- Используем только MUI v5+.
- Темизация — через ThemeProvider в app/layout.tsx.
- Всегда использовать MUI компоненты, если они есть (Button, Box, Typography…).

## 5.2 Стиль компонента MUI

- Не переопределять стили через sx, если можно использовать CSS Modules.
- sx допускается для мелких изменений.
- Для кастомной логики/стилей → CSS Modules.

---

# 6. Стилизация (CSS Modules)

- Каждый компонент должен иметь файл стилей:

```
Component.module.css
```

- Нейминг классов — **kebab-case**:

```
.root {}
.container {}
.title {}
.image-wrapper {}
```

- Не использовать глобальные CSS (кроме vars и reset).
- Не использовать SCSS/SASS.
- Только CSS Modules.

---

# 7. Работа с API и сервером

## 7.1 Общие правила

- Все запросы — в `model` или `api` соответствующего FSD модуля.
- Не писать запросы прямо в компонентах.
- Использовать fetch, настройки в shared/api.

## 7.2 Серверные функции

- Размещать в:

```
entities/.../model/
features/.../model/
shared/api/
```

---

# 8. Форматирование и стиль кода

## 8.1 Принципы

- Использовать ES6 импорты.
- Запятые → trailing commas.
- Строки → одинарные кавычки.
- Консоль не использовать, кроме ошибок (`console.error()`).

## 8.2 Линтер

Copilot должен следовать правилам:

- ESLint
- Prettier

---

# 9. Лучшие практики архитектуры

- Логику выносить из UI.
- Не смешивать бизнес-логику и рендеринг.
- Компонент должен быть как можно более "тупым".
- Sidebar/Header/Footer — это widgets.
- Фильтры, сортировки → features.
- Объекты доменной логики → entities.

---

# 10. Комментарии и документация

- Использовать JSDoc над сложными функциями.
- Не писать лишних комментариев.
- Документировать только:
  - публичные методы
  - API endpoints
  - сервисы

---

# 11. Примеры генерации для Copilot

## ❌ Плохо

- API внутри компонента
- Стили inline
- Относительные импорты
- Логика + UI смешаны

## ✅ Хорошо

- Отдельный UI компонент
- Логика в model/
- Стили в module.css
- Импорты абсолютные
- Используется FSD

---

# Итог

Copilot должен генерировать код:

- строго по FSD
- с использованием MUI
- со стилями в CSS Modules
- типизированный
- в стиле чистой архитектуры
- с разделением слоёв
- с поддержкой SSR и server/client components Next.js

Если генерация нарушает правила — Copilot должен адаптировать код автоматически.
